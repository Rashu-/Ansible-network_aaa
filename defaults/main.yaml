---

# Define the aaa servers to be configured
# If the servers are used for tacacs change "is_tacacs" to "True"
# If they are going to be used for radius change "is_radius" to "True"
# If you use the same servers for both radius and tacacs change both vars to "True"
# "name" is used by default if "ip" is not defined. At least one of them  must be defined for the role to work
# Define the vars relevant to you otherwise the defaults will be used.
# If both tacacs and radius are used, tacacs group will be preferred for central network device auth. 

aaa_vars:
  radius_auth_port: 1812
  radius_acct_port: 1813
  timeout: 5                      # device default is 5. This is used for both radius and tacacs
  tacacs_port: 89
  tacacs_key: ttest               # use something like ansible vault to encrypt your sensitive info
  radius_key: rtest               # use something like ansible vault to encrypt your sensitive inf
  deadtime: 0                     # device default is 0. Used for both radius and tacacs
  directed_request: disabled      # device default is disabled. Used for both radius and tacacs
  tacacs_group_name: tacacs+      # Configure your tacacs group name if tacacs is used
  radius_group_name: radius       # Configure your radius group name if radius is used
#  console_group: tac/rad group   # uncomment this and add your radius/tacacs group for console auth. Role default is local.    
#  source_interface: loopback 0   # role default is loopback 0
  only_local: False               # Make this True when you want only local auth on the device
#  no_local:                      # uncomment this when you don't want local auth if tacacs/radius is down
            # create another auth group for console auth

 
aaa_servers:
     - name: srv1.acme.com
#       ip: 1.1.1.1            # if you don't specify IP, name of the server will be used
#       timeout: "{{ aaa_vars.timeout }}"
       is_tacacs: True        # True if you want to use server as tacacs
#       t_port: "{{ aaa_vars.tacacs_port }}"
#       t_key: "{{ aaa_vars.tacacs_key }}"
       is_radius: True        # True if you want to use server as radius
       r_auth_port: "{{ aaa_vars.radius_auth_port }}"
       r_acct_port: "{{ aaa_vars.radius_acct_port }}"
       group: "{{ aaa_vars.tacacs_group_name | default(omit) }}"
#       r_key: "{{ aaa_vars.radius_key }}"

     - name: srv2.acme.com
#       ip: 2.2.2.2            # if you don't specify IP, name of the server will be used
#       timeout: "{{ aaa_vars.timeout }}"
       is_tacacs: True        # True if you want to use server as tacacs
#       t_port: "{{ aaa_vars.tacacs_port }}"
#       t_key: "{{ aaa_vars.tacacs_key }}"
       is_radius: True        # True if you want to use server as radius
       r_auth_port: "{{ aaa_vars.radius_auth_port }}"
       r_acct_port: "{{ aaa_vars.radius_acct_port }}"
       group: "{{ aaa_vars.tacacs_group_name }}"       
#       r_key: "{{ aaa_vars.radius_key }}"

aaa_local_users:
  - name: test
    state: present
    password: test
#    role:                           # default nxos role is priv-0. other roles on nxos are network-admin network-operator ... 
#    ssh_key:                        # ssh public key to be used for the user
    expire_date:                    # set user expire date YYYY-MM-DD format
       
